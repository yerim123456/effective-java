## item 38

### ν™•μ¥ν•  μ μλ” μ—΄κ±° νƒ€μ…μ΄ ν•„μ”ν•λ©΄ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λΌ

---

### π™‹β€β™€οΈ μ—΄κ±° νƒ€μ…μ„ ν™•μ¥ν•  μ μ—†κ² λ§λ“  μ΄μ κ°€ μμ§€ μ•μ„κΉμ”?

1. ν™•μ¥ν• νƒ€μ…μ μ›μ†λ” κΈ°λ° νƒ€μ…μ μ›μ†λ΅ μ·¨κΈ‰ν•μ§€λ§ `κ·Έ λ°λ€κ°€ μ„±λ¦½ν•μ§€ μ•μ`
2. κΈ°λ° νƒ€μ…κ³Ό ν™•μ¥λ νƒ€μ…λ“¤μ μ›μ† λ¨λ‘λ¥Ό μνν•  λ°©λ²•λ„ λ§λ•…μΉ μ•μ
3. ν™•μ¥μ„±μ„ λ†’μ΄λ ¤λ©΄ κ³ λ ¤ν•  μ”μ†κ°€ λμ–΄λ‚ μ„¤κΌμ™€ κµ¬ν„μ΄ λ” λ³µμ΅ν•΄μ§

---

### π™‹β€β™€οΈ μ•μΆ‹μ€ μ μ΄ μ΄λ ‡κ² λ§μ€λ°, ν™•μ¥ν•΄μ•Ό ν•λ” κ²½μ°κ°€ μμ„κΉμ”?

μ–΄μΈλ¦¬λ” μ“°μ„μ΄ μµμ†ν• ν•λ‚λ” μμµλ‹λ‹¤. λ°”λ΅ `μ—°μ‚° μ½”λ“`μ κ²½μ°μ…λ‹λ‹¤.
μ—°μ‚° μ½”λ“μ κ° μ›μ†λ” νΉμ • κΈ°κ³„κ°€ μν–‰ν•λ” μ—°μ‚°μ„ λ»ν•λ”λ°,
APIκ°€ κΈ°λ³ΈμΌλ΅ μ κ³µν•λ” κΈ°λ³Έ μ—°μ‚° μ™Έμ— `μ‚¬μ©μκ°€ ν™•μ¥ μ—°μ‚°μ„ μ¶”κ°€ν•  μ μλ„λ΅ μ—΄μ–΄μ¤μ•Ό ν•  λ•`κ°€ μλ‹¤κ³  ν•©λ‹λ‹¤.

---

### π™‹β€ κ·Έλ ‡λ‹¤λ©΄, μ–΄λ–»κ² κµ¬ν„ν•  μ μλ‚μ”?

μ¤‘μ”ν• μ‚¬μ‹¤μ€!! `μ—΄κ±° νƒ€μ…μ΄ μ„μ΄μ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  μ μλ‹¤`λ” μ‚¬μ‹¤μ„ μ΄μ©ν•λ” κ²ƒμ…λ‹λ‹¤.
λ”°λΌμ„ κµ¬ν„ μμ„λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

1. μ—°μ‚° μ½”λ“μ© μΈν„°νμ΄μ¤ μ •μ

```java
public interface Operation {
    double apply(double x, double y);
}
```

2. μΈν„°νμ΄μ¤λ¥Ό μ—΄κ±° νƒ€μ…μΌλ΅ κµ¬ν„ > ν‘μ¤€ κµ¬ν„μ²΄ μ—­ν• 

```java
public enum BasicOperation implements Operation {
    PLUS("+") {
        public double apply(double x, double y) {
            return x + y;
        }
    },
    MINUS("-") {
        public double apply(double x, double y) {
            return x - y;
        }
    },
    TIMES("*") {
        public double apply(double x, double y) {
            return x * y;
        }
    },
    DIVIDE("/") {
        public double apply(double x, double y) {
            return x / y;
        }
    };

    private final String symbol;

    BasicOperation(String symbol) {
        this.symbol = symbol;
    }

    @Override
    public String toString() {
        return symbol;
    }
}
```

3. μΈν„°νμ΄μ¤λ¥Ό μ—΄κ±° νƒ€μ…μΌλ΅ κµ¬ν„ > ν™•μ¥ μ—°μ‚° μ¶”κ°€

```java
public enum ExtendedOperation implements Operation {
    EXP("^") {
        public double apply(double x, double y) {
            return Math.pow(x, y);
        }
    },
    REMAINDER("%") {
        public double apply(double x, double y) {
            return x % y;
        }
    };
    private final String symbol;

    ExtendedOperation(String symbol) {
        this.symbol = symbol;
    }

    @Override
    public String toString() {
        return symbol;
    }
}
```

μ¦‰, μ—΄κ±° νƒ€μ… μμ²΄λ¥Ό ν™•μ¥μ‹ν‚¬ μλ” μ—†μΌλ‚, μΈν„°νμ΄μ¤μΈ `Operation`μ€ ν™•μ¥ν•  μ μκΈ°μ—
ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό μ—΄κ±° νƒ€μ…μΌλ΅ κµ¬ν„ν•΄ κΈ°λ³Έ νƒ€μ…μΈ `BasicOperation`μ„ λ€μ²΄ν•λ” λ°©λ²•μΌλ΅ ν™•μ¥μ„ μ‹ν‚¤λ” κ²ƒμ…λ‹λ‹¤.

μ¦‰, `Operation` μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ„λ΅ μ‘μ„±λμ–΄ μκΈ°λ§ ν•λ‹¤λ©΄,
μ™„μ„±λ `ExtendedOperation`μ€ κΈ°μ΅΄ μ—°μ‚°μ„ μ“°λ κ³³μ΄λ©΄ μ–΄λ””λ“  μ“Έ μ μμµλ‹λ‹¤.

---

### π™ κ°λ³„ μΈμ¤ν„΄μ¤ μμ¤€λΏ μ•„λ‹λΌ, νƒ€μ… μμ¤€μ—μ„λ„ λ€μ²΄κ°€ κ°€λ¥ν•©λ‹λ‹¤.

μ΄λ” λ‘ κ°€μ§€ μμ‹λ¥Ό ν†µν•΄ ν™•μΈν•  μ μμµλ‹λ‹¤.

#### 1. `<T extends Enum<T> & Operation>`μ„ ν™μ©ν• λ°©μ‹
```java
public static void main(String[] args) {
    double x = Double.parseDouble(args[0]);
    double y = Double.parseDouble(args[1]);
    test(ExtendedOperation.class, x, y);
}

private static <T extends Enum<T> & Operation> void test(
        Class<T> opEnumType, double x, double y) {
    for (Operation op : opEnumType.getEnumConstants())
        System.out.printf("%f %s %f = %f%n",
                x, op, y, op.apply(x, y));
}
```

#### `<T extends Enum<T> & Operation>` ν•μ •μ  νƒ€μ… ν† ν° 
Class κ°μ²΄κ°€ μ—΄κ±° νƒ€μ…μΈ λ™μ‹μ— Operationμ ν•μ„ νƒ€μ…μ΄μ–΄μ•Ό ν•λ‹¤λ” λ»

#### `getEnumConstants` λ©”μ„λ“
ν•΄λ‹Ή enumμ— μ„ μ–Έλ λ¨λ“  μ—°μ‚°μ„ κ°€μ Έμ¬ μ μλ‹¤λ” κ²ƒ

λ”°λΌμ„ μ„μ μ½”λ“λ¥Ό ν†µν•΄ `ExtendedOperation`μ λ¨λ“  μ›μ†μ— λ€ν• ν…μ¤νΈκ°€ κ°€λ¥ν•©λ‹λ‹¤. 
λ§μ•½ test λ©”μ„λ“μ μΈμλ΅ `BasicOperation.class` λ¥Ό λ„£μ–΄μ¤¬λ‹¤λ©΄ ν•΄λ‹Ή ν΄λμ¤μ λ¨λ“  μ›μ†μ— λ€ν• ν…μ¤νΈκ°€ κ°€λ¥ν• κ²λ‹λ‹¤!

#### 2. `Collection<? extends Operation>`μ„ ν™μ©ν• λ°©μ‹
```java
 public static void main(String[] args) {
        double x = Double.parseDouble(args[0]);
        double y = Double.parseDouble(args[1]);
        test(Arrays.asList(ExtendedOperation.values()), x, y);
    }
    private static void test(Collection<? extends Operation> opSet,
                             double x, double y) {
        for (Operation op : opSet)
            System.out.printf("%f %s %f = %f%n",
                    x, op, y, op.apply(x, y));
    }
```

#### `Collection<? extends Operation>` ν•μ •μ  νƒ€μ… ν† ν°
`ExtendedOperation.values()`λ¥Ό μ‚¬μ©ν•μ—¬ ν•΄λ‹Ή μ—΄κ±° νƒ€μ…μ λ¨λ“  μ›μ†λ¥Ό `List`λ΅ λ³€ν™ ν›„ μ „λ‹¬ν•λΌλ” λ»

λ³΄λ‹¤ λ λ³µμ΅ν•κ³ , μ μ—°ν•κ² ν…μ¤νΈλ¥Ό ν•  μ μλ” λ°©μ•μ…λ‹λ‹¤. λ‹¤μ–‘ν• κµ¬ν„ νƒ€μ…μ μ—°μ‚°μ„ μ΅°ν•©ν•΄ νΈμ¶ν•  μ μλ‹¤λ” μ¥μ μ„ κ°€μ§‘λ‹λ‹¤.
λ‹¤λ§, νΉμ • μ—°μ‚°μ—μ„ `EnumSet`κ³Ό `EnumMap`μ„ μ‚¬μ©ν•  μ μ—†λ‹¤λ” λ‹¨μ μ΄ μμµλ‹λ‹¤.

---

### π™ μ΄λ° κµ¬ν„ λ°©μ‹μ—λ„ μ‚¬μ†ν• λ¬Έμ λ” μ΅΄μ¬ν•©λ‹λ‹¤.
μ—΄κ±° νƒ€μ…λΌλ¦¬ κµ¬ν„μ„ μƒμ†ν•  μ μ—†λ‹¤λ” λ¬Έμ μ…λ‹λ‹¤. 

λ§μ•½ μ•„λ¬΄ μƒνƒμ—λ„ μμ΅΄ν•μ§€ μ•λ” κ²½μ°μ—λ” λ””ν΄νΈ κµ¬ν„μ„ μ΄μ©ν•΄ μΈν„°νμ΄μ¤μ— μ¶”κ°€ν•λ” λ°©λ²•μ΄ μμµλ‹λ‹¤.
λ‹¤λ§, μ½”λ“ μ¤‘λ³µλ‰μ΄ λ§μ•„μ§€λ” κ²½μ°μ—”, κ³µμ ν•λ” κΈ°λ¥μ΄ λ§λ‹¤λ©΄ κ·Έ λ¶€λ¶„μ„ λ³„λ„μ λ„μ°λ―Έ ν΄λμ¤λ‚ μ •μ  λ„μ°λ―Έ λ©”μ„λ“λ΅ λ¶„λ¦¬ν•λ” λ°©μ‹μΌλ΅ μ½”λ“ μ¤‘λ³µμ„ μ—†μ•¨ μ μμ„ κ²ƒμ…λ‹λ‹¤.

